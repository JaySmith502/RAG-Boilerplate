---
phase: 01-foundation
plan: 04
type: gap-closure
wave: 1
depends_on: []
files_modified:
  - frontend/src/index.css
  - frontend/index.html
autonomous: true

must_haves:
  truths:
    - "Dark mode background is visually softer than pure black"
    - "Background and sidebar have clear visual distinction"
    - "FOUC prevention inline script updated to match new values"
  artifacts:
    - path: "frontend/src/index.css"
      provides: "Updated dark theme CSS variables"
      contains: "--background: oklch(0.1"
---

<objective>
Adjust dark theme colors for softer appearance with visual depth

Purpose: The current dark theme uses near-black (oklch 0.145) which feels too stark. Users want a softer dark background that's distinct from the sidebar, similar to modern SaaS apps like Linear and Notion.

Output: Updated CSS variables in index.css and matching FOUC prevention script with softer, warmer dark theme.
</objective>

<context>
**Gap from UAT:** Test 5 - Dark mode background needs visual depth distinct from sidebar
**Root cause:** Dark theme uses oklch(0.145 0 0) for background and oklch(0.205 0 0) for sidebar - both pure neutral grays with minimal differentiation.

**Current values (index.css .dark):**
- --background: oklch(0.145 0 0)
- --sidebar: oklch(0.205 0 0)
- --card: oklch(0.205 0 0)

**Target:** Softer dark with more visual hierarchy
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update dark theme CSS variables for softer appearance</name>
  <files>
    frontend/src/index.css
  </files>
  <action>
    Update the `.dark` section CSS variables:

    1. **Background**: Change from `oklch(0.145 0 0)` to `oklch(0.16 0.01 250)`
       - Slightly higher lightness (16% vs 14.5%)
       - Tiny hint of blue chroma for depth (like VS Code/Linear)

    2. **Sidebar**: Keep at `oklch(0.205 0 0)` or adjust to `oklch(0.13 0.01 250)`
       - Make sidebar darker than background for clear distinction
       - This creates the "inset panel" effect common in modern apps

    3. **Card**: Adjust to `oklch(0.19 0.005 250)`
       - Cards should be slightly lighter than background to stand out

    4. **Muted/Secondary**: Adjust proportionally to maintain hierarchy

    The key insight: sidebar DARKER than background, cards LIGHTER than background.
  </action>
  <verify>
    Run `cd frontend && pnpm dev` and check dark mode:
    - Background should feel softer, not pure black
    - Sidebar should be visually distinct (darker)
    - Cards should pop slightly from background
  </verify>
  <done>
    Dark theme CSS variables updated with softer tones and clear visual hierarchy.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update FOUC prevention script with new background color</name>
  <files>
    frontend/index.html
  </files>
  <action>
    The inline FOUC prevention script in index.html sets background color before CSS loads.
    Update it to use the new dark background color value.

    Find the script that sets `document.documentElement.style.backgroundColor` and update
    the dark mode color to match the new --background value.
  </action>
  <verify>
    Refresh page in dark mode - no flash of different color on load.
  </verify>
  <done>
    FOUC script updated with new dark background color.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Visual check in dark mode:**
   - Background feels softer than before (not pure black)
   - Sidebar is visually distinct from main content area
   - Cards/elevated surfaces have subtle lift

2. **FOUC check:**
   - Refresh page in dark mode - no color flash

3. **Light mode unchanged:**
   - Light mode should still look correct
</verification>

<success_criteria>
- Dark background uses softer tone with visual depth
- Sidebar clearly distinct from background
- No FOUC on page refresh
- Light mode unaffected
</success_criteria>
