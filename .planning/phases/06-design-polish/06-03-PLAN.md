---
phase: 06-design-polish
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/layout/header.tsx
  - frontend/src/features/evaluation/components/ResultsDisplay.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "At narrow viewport (mobile), user can tap a button to open the sidebar"
    - "MetricCards display in 3 columns on desktop/tablet width"
  artifacts:
    - path: "frontend/src/components/layout/header.tsx"
      provides: "SidebarTrigger button visible on mobile"
      contains: "SidebarTrigger"
    - path: "frontend/src/features/evaluation/components/ResultsDisplay.tsx"
      provides: "3-column grid on medium+ breakpoints"
      contains: "md:grid-cols-3"
  key_links:
    - from: "frontend/src/components/layout/header.tsx"
      to: "frontend/src/components/ui/sidebar.tsx"
      via: "SidebarTrigger import and render"
      pattern: "import.*SidebarTrigger"
---

<objective>
Fix two UAT gaps: mobile sidebar discoverability and MetricCards desktop layout.

Purpose: Close UAT failures from 06-UAT.md tests #2 and #5 to complete Phase 6 design polish.
Output: Working mobile sidebar toggle and proper 3-column MetricCards grid.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-design-polish/06-UAT.md

@frontend/src/components/layout/header.tsx
@frontend/src/components/ui/sidebar.tsx
@frontend/src/features/evaluation/components/ResultsDisplay.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add SidebarTrigger to Header for mobile navigation</name>
  <files>frontend/src/components/layout/header.tsx</files>
  <action>
Import SidebarTrigger from "@/components/ui/sidebar".

Add SidebarTrigger to the Header component, positioned on the left side before the title. The trigger should only be visible on mobile (md:hidden class) since the sidebar is always visible on desktop.

Update the header layout:
- Add SidebarTrigger with className="md:hidden" before the title div
- Wrap the existing flex-1 title container in a flex with items-center and gap-2 to accommodate the trigger

The SidebarTrigger component is already implemented in sidebar.tsx (lines 256-280) - it renders a ghost button with PanelLeftIcon that calls toggleSidebar() from the SidebarContext.
  </action>
  <verify>
Build passes: `cd frontend && pnpm build`
Visually verify: At viewport < 768px, a hamburger/panel icon appears in the header. Clicking it opens the sidebar as a Sheet overlay.
  </verify>
  <done>Mobile users can tap the SidebarTrigger button in the header to open the sidebar navigation.</done>
</task>

<task type="auto">
  <name>Task 2: Fix MetricCards grid breakpoint for proper 3-column display</name>
  <files>frontend/src/features/evaluation/components/ResultsDisplay.tsx</files>
  <action>
In the ResultsDisplay component, change the MetricCards grid breakpoint from sm:grid-cols-3 to md:grid-cols-3.

Current (line 66):
```tsx
<div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
```

Change to:
```tsx
<div className="grid grid-cols-1 md:grid-cols-3 gap-4">
```

Rationale: The sm breakpoint (640px) is too narrow when combined with the sidebar width (256px) and container max-width (1024px). The md breakpoint (768px) provides more reliable 3-column layout on actual desktop/tablet viewports where the sidebar is visible.
  </action>
  <verify>
Build passes: `cd frontend && pnpm build`
Visually verify: At viewport >= 768px, the three MetricCards (Hit Rate, MRR, Avg Score) display in a single row of 3 columns. At viewport < 768px, they stack vertically.
  </verify>
  <done>MetricCards display in 3 columns on desktop/tablet viewports (>= 768px).</done>
</task>

</tasks>

<verification>
1. Run build: `cd frontend && pnpm build` - must complete without errors
2. Mobile sidebar test: Open app at viewport width ~400px. Header shows panel/menu icon. Tapping opens sidebar as overlay.
3. MetricCards test: Open Evaluation page at full desktop width. The three metric cards display in a horizontal row.
</verification>

<success_criteria>
- SidebarTrigger visible and functional on mobile viewports (< 768px)
- MetricCards display 3 columns on desktop/tablet (>= 768px)
- Build passes with no TypeScript or lint errors
- Both UAT gaps (tests #2 and #5) are closed
</success_criteria>

<output>
After completion, create `.planning/phases/06-design-polish/06-03-SUMMARY.md`
</output>
